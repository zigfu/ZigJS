<html>
  <head>

	<link href='http://fonts.googleapis.com/css?family=Istok+Web:400,400italic,700,700italic|Abel|Yellowtail' rel='stylesheet' type='text/css' />
    <link href='css/style.css' rel='stylesheet' type='text/css' />
    <link href="slide/default.css" rel="stylesheet" class="theme" />

<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js' type='text/javascript'></script>

<!-- ZigJS -->
<script type="text/javascript" src="js/zig.js"></script>

    
<style type="text/css" rel="stylesheet">
#wrapper {
	width : 100%;
	height : 100%;
}

.slider {
  position:absolute;
	width: 940px;
	height: 15px;
	margin: 0px auto;
  top:90%;
  margin-top: 0px;
  left: 50%;
  margin-left:-470;
	background-color: #9ca6ac;
	border-radius: 3px;
	-moz-border-radius: 3px;
	-webkit-border-radius: 3px;
	box-shadow:inset 0px 1px 5px #000;
	-moz-box-shadow:inset 0px 1px 5px #000;
	-webkit-box-shadow:inset 0px 1px 5px #000;
	-o-box-shadow:inset 0px 1px 5px #000;
}

.slider_nub {
	width: 20px;
	height: 15px;
	background-color: #151b23;
	position: relative;
	border-radius: 3px;
	-moz-border-radius: 3px;
	-webkit-border-radius: 3px;
	box-shadow: 0px 1px 5px #000;
	-moz-box-shadow: 0px 1px 5px #000;
	-webkit-box-shadow: 0px 1px 5px #000;
	-o-box-shadow: 0px 1px 5px #000;
}

.showinsession {
	display: none
}

#main-section {
  /*overflow:;*/
  width : 80%;
  height : 50%;
  margin:auto;
}
</style>

    <script>

var cursor_userid;

function setStatus(status) {
  //document.getElementById('status').innerHTML = status;
  console.log("status set to: " + status);
}

function hasClass(ele,cls) {
    return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
    if (!hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
      var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function clamp(val, min, max) {
  if (val < min) return min;
  if (val > max) return max;
  return val;
}

var contentIframe;

function loaded() {

  sliderNub = document.getElementById("slider_nub");
  renderInterval = setInterval(updateSlider, 1/60 * 1000)
  contentIframe = document.getElementById("content-frame");
}

document.addEventListener('DOMContentLoaded', function () { setTimeout(loaded, 200); }, false);


var horizontalSD = new Zig.HorizontalSwipeDetector(150); //150 mm wide slider
horizontalSD.onValueChange = function(value) {
  sliderTarget = value;
}
horizontalSD.onSwipeLeft = function() {
  slideshow.prev();
}
horizontalSD.onSwipeRight = function() {
  slideshow.next();
}

var pushDetector = new Zig.PushDetector();
pushDetector.onClick = function() {
  console.log('push detector: click');
  // nasty 
  contentIframe.src = slideshow._slides[slideshow._getCurrentIndex()]._node.getAttribute("data-uri");
};

isInSession = false;
function onSessionStart()
{
  isInSession = true;
  $(".showinsession").fadeIn();
}

function onSessionEnd()
{
  isInSession = false;
  $(".showinsession").fadeOut();
} 

sliderTarget = 0.5;
sliderCurrent = 0.5;

function lerp(from, to, amount) 
{
  return from + ((to - from) * amount);
}

function updateSlider()
{
  if (!isInSession) return;
  
  sliderCurrent = lerp(sliderCurrent, sliderTarget, 0.2);
  sliderNub.style.left = (sliderCurrent * sliderNub.parentNode.offsetWidth - (sliderNub.offsetWidth / 2)) + "px";
}

function ZigPluginLoaded() {
  Zig.init(document.getElementById("ZigPlugin"));
  Zig.SingleUser.controls.AddControl(horizontalSD);
  Zig.SingleUser.controls.AddControl(pushDetector);
  Zig.SingleUser.onUserEngaged = function(user) { console.log("Yes"); onSessionStart(); };
  Zig.SingleUser.onUserDisengaged = function(user) { onSessionEnd(); };
}


    </script>

  <title>Zigfu // Slideviewer</title>
  </head>

  <body>

  <div id="wrapper">

<div id='header'>
    <div class='row'>
      <div class='right'>
        <h1>Uber Page Scroller</h1>
      </div>
    </div>
</div>

  <div id="main-section">
    <div style="background:white">
      <iframe src="http://www.bing.com" id="content-frame" style="width:100%; height:100%;"></iframe>
    </div>
  </div>
  <div id="presentation-counter" style="display:none;"></div>
    <div class="presentation">
      <div class="slides">

        <div class="slide" id="landing-slide" data-uri="http://python.org">
            <center>
            <h2>first page</h2>
            </center>
        </div>

        <div class="slide slide1" id="slide1" data-uri="http://www.blah.com">
            <center>
            <h2>2nd page</h2>
            </center>
        </div>

        <div class="slide slide2" id="slide2" data-uri="http://www.zigfu.com">
            <center>
            <h2>3rd page</h2>
            </center>
        </div>

        

        <div class="slide slide3" id="slide3" data-uri="http://www.test.com">
            <center>
            <h2>4th page</h2>
            </center>
        </div>
        <div class="slide slide3" id='slide4' data-uri="http://www.example.com">
            <center>
            <h2>5th page</h2>
            </center>
        </div>
        


      </div> <!-- slides -->
      <div id="speaker-note" class="invisible" style="display: none;">
      </div>
      
      
          <div style="height: 15px;">
      
              <div class="slider showinsession" id="slider">
      
                <div class="slider_nub showinsession" id="slider_nub"></div>
      
              </div>
      
            </div>
            
    </div> <!-- presentation -->
			
         
  </div>


    <script src="slide/slide.js"></script>
    <div id="realcursor" style="display:none">
    </div>
         <div id="pluginContainer">
  <object id="ZigPlugin" type="application/x-zig" width="0" height="0">
    <param name="onload" value="ZigPluginLoaded" />
  </object>
</div>

  </body>
</html>